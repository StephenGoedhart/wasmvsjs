<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="path/to/bootstrap/css/bootstrap.min.css">
        <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">
        <link rel="stylesheet" type="text/css" href="style.css">
    </head>
    <body>
        <header>
                <div id="logo">Javascript vs WebAssembly</div>
        </header>
        <div id="content">
            <div class="vertical-spacer"></div>
            <div id="title">
                Javascript vs Web Assembly
            </div>
            <div id="graph">
                <canvas id="chart" width="1080px" height="250px"></canvas>
            </div>
            <div class="vertical-spacer"></div>
            <div id="main_nav">

                <div class="menu_section_container">
                    <div class="menu_section">
                        <select class="select-css" id="methods">
                            <option value="factorial">factorial</option>
                            <option value="fibonacci">fibonacci</option>
                          </select>
                    </div>
                    <div class="menu_section">
                           <input oninput="update_cycle_slider();updateChartLabelsCount();" style="width:100%; height: 20px" type="range" id="cycle_size" min="50" max="1000" value="50" step="50"/>
                           <div>
                                <span id="cycle_size_text" style="width:100%; height: 15px; text-align: center;">50</span> repetitions</div>
    
                    </div>
                    <div class="menu_section">
                        <input oninput="update_sample_slider()" style="width:100%; height: 20px" type="range" id="sample_size" min="3" max="40" value="40"/>
                        <div>
                            <span id="sample_size_text" style="width:100%; height: 15px; text-align: center;">40</span> samples</div>
                 </div>
                    <div class="menu_section">
                    <button id="menu_start" onclick="start_both()"> START </button>
                    </div>
                </div>

            </div>
            <div class="vertical-spacer"></div>
            <div id="div_js">
                
                <div class="card" style="background-color:yellowgreen">
                    <div class="card_title">Javascript</div>
                    <div class="card_data" style="background-color:mediumseagreen">
                        <div id="js_data">0</div>
                      
                        <!--<div class="card_info" id="js_info">_</div>-->
                    </div>
                    <div class="card_nav">
                        <ul>
                            <li>
                                <button onclick="js_start()">RUN ISOLATED</button>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="output">
                    <textarea class="text_area" id="js_info"></textarea>
                </div>
            </div>
            

            <div id="div_wasm">
                <div class="output">
                    <textarea class="text_area" id="wasm_info"></textarea>
                </div>

                <div class="card" style="background-color:cornflowerblue; border-radius: 0 15px 15px 0;">
                    <div class="card_title">Web Assembly</div>
                    <div class="card_data" style="background-color:royalblue;">
                        <label id="wasm_data">0</label>
                        <!--<div class="card_info" id="wasm_info">_</div>-->
                       
                    </div>
                    <div class="card_nav">
                        <ul>
                            <li>
                                <button onclick="wasm_start()">RUN ISOLATED</button>
                            </li>
                        </ul>
                    </div>
                </div>
           
                <!--<canvas id="wasmChart" width="400" height="400"></canvas>-->
            </div>
        </div>
        <script>
          
        </script>

    <!--<script type="application/javascript" src="./wasm_functions/wasm_fibonacci.wasm"></script>-->
    <!-- <script type="application/javascript" src="wasm_factorial.js"></script> -->
    <script type="application/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
    <script type="application/javascript" src="chart.js"></script>
    <script>

        var sample_size_text = document.getElementById('sample_size_text');
        var sample_size = document.getElementById('sample_size');
        var cycle_size_text = document.getElementById('cycle_size_text');
        var cycle_size = document.getElementById('cycle_size');
        
        update_sample_slider = () => {
            sample_size_text.innerHTML = sample_size.value;
        }
        
        update_cycle_slider = () => {
            cycle_size_text.innerHTML = cycle_size.value;
        }

        start_both = () => {
            js_start(); 
            wasm_start();
        }

        js_start = () => {
            data_element = document.getElementById('js_data');
            info_element = document.getElementById('js_info')
            data_element.innerHTML = "...";
            info_element.innerHTML = "___";

            var d = {cycle_size: parseInt(cycle_size.value), sample_size: parseInt(sample_size.value)}

            js_worker = new Worker('./javascript_functions/fibonacci.js');
            js_worker.postMessage(d);
            js_worker.onmessage = (event) => {
                var time = event.data.time;
                data_element.innerHTML = time;
                info_element.innerHTML = event.data.output;
                updateJSChart(event.data.cycle, time)
            } 
        }
        
        wasm_start = () => {
            data_element = document.getElementById('wasm_data');
            info_element = document.getElementById('wasm_info');
            data_element.innerHTML = "...";
            info_element.innerHTML = "___";

            var d = {cycle_size: parseInt(cycle_size.value), sample_size: parseInt(sample_size.value)}
           
            wasm_worker = new Worker('./wasm_functions/load_wasm_fibonacci.js');

            wasm_worker.postMessage(d);
            wasm_worker.onmessage = (event) => {
                if(event.data.done){wasm_worker.terminate();}
                data_element.innerHTML = event.data.time;
                info_element.innerHTML = event.data.output;
                updateWasmChart(event.data.cycle, event.data.time)
            }
        }

    </script>
        </body>
</html>